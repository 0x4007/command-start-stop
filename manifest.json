{
  "name": "Start | Stop",
  "description": "Assign or un-assign yourself from an issue.",
  "ubiquity:listeners": [
    "issue_comment.created",
    "issues.assigned",
    "issues.unassigned",
    "pull_request.opened",
    "pull_request.edited"
  ],
  "commands": {
    "start": {
      "ubiquity:example": "/start",
      "description": "Assign yourself to the issue."
    },
    "stop": {
      "ubiquity:example": "/stop",
      "description": "Unassign yourself from the issue."
    }
  },
  "configuration": {
    "default": {},
    "type": "object",
    "properties": {
      "reviewDelayTolerance": {
        "default": "1 Day",
        "description": "When considering a user for a task: if they have existing PRs with no reviews, how long should we wait before 'increasing' their assignable task limit?",
        "type": "string"
      },
      "taskStaleTimeoutDuration": {
        "default": "30 Days",
        "description": "When displaying the '/start' response, how long should we wait before considering a task 'stale' and provide a warning?",
        "type": "string"
      },
      "startRequiresWallet": {
        "default": true,
        "description": "If true, users must set their wallet address with the /wallet command before they can start tasks.",
        "type": "boolean"
      },
      "maxConcurrentTasks": {
        "default": {
          "member": 10,
          "contributor": 2
        },
        "description": "The maximum number of tasks a user can have assigned to them at once, based on their role.",
        "type": "object",
        "patternProperties": {
          "^(.*)$": {
            "type": "integer"
          }
        }
      },
      "assignedIssueScope": {
        "default": "org",
        "description": "When considering a user for a task: should we consider their assigned issues at the org, repo, or network level?",
        "anyOf": [
          {
            "const": "org",
            "type": "string"
          },
          {
            "const": "repo",
            "type": "string"
          },
          {
            "const": "network",
            "type": "string"
          }
        ]
      },
      "emptyWalletText": {
        "default": "Please set your wallet address with the /wallet command first and try again.",
        "description": "a message to display when a user tries to start a task without setting their wallet address.",
        "type": "string"
      },
      "rolesWithReviewAuthority": {
        "default": [
          "COLLABORATOR",
          "OWNER",
          "MEMBER",
          "ADMIN"
        ],
        "description": "When considering a user for a task: which roles should be considered as having review authority? All others are ignored.",
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "requiredLabelsToStart": {
        "default": [],
        "description": "If set, a task must have at least one of these labels to be started.",
        "type": "array",
        "items": {
          "type": "string"
        }
      }
    },
    "required": [
      "reviewDelayTolerance",
      "taskStaleTimeoutDuration",
      "startRequiresWallet",
      "maxConcurrentTasks",
      "assignedIssueScope",
      "emptyWalletText",
      "rolesWithReviewAuthority",
      "requiredLabelsToStart"
    ]
  }
}